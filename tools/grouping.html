<!DOCTYPE html>
<html lang='ja'>
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="./css/common.css">
        <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css"/>
        <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    </head>

    <body>
        <!-- PyScript -->
        <py-config>
            packages = ["numpy", "matplotlib", "seaborn"]
        </py-config>

        <script type="py" src="./pyscripts/grouping.py"></script>

        <!-- トップへのリンク -->
        <a href="../index.html">TOPページ</a><br>

        <!-- 説明 -->
        <h1>グループ分けツール</h1>
        メンバー名、グループ名、グループ人数の各フォームを埋めて【次のグループ分け】をクリックすると初期のグループ分けが生成されます。<br>
        その後は【次のグループ分け】をクリックし続けるだけで新しいグループ分けが生成されていきます。<br>
        <b>初期化する場合はリロードしてください。</b><br>

        <h2>特色</h2>
        <ul>
            <li>なるべく回数の多いペアを避け、回数の少ないペアを優先します。</li>
            <li>休憩回数（余りになった回数）が均等になるようにします。</li>
            <li>統計情報としてこれまでの休憩回数とペアの回数が可視化されます。（ぶっちゃけデバッグ用）</li>
            <li>ページの末尾でこれまでのグループ分け履歴が見れます。</li>
        </ul>

        <h2>注意事項</h2>
        <ul>
            <li>メンバー名およびグループ名に空白やカンマ","およびセミコロン";"が含まれてはいけません。</li>
            <li><b>誤って初期化（リロード）しないように注意してください。</b></li>
        </ul>

        <!-- 情報入力 -->
        <div class="flex">
            <div>
                <h2>メンバー名</h2>
                <textarea id="member-names" class="py-input" type="text" rows="10" cols="20"></textarea>
            </div>
            <div>
                <h2>グループ名</h2>
                <textarea id="group-names" class="py-input" type="text" rows="10" cols="20"></textarea>
            </div>
            <div>
                <h2>グループ人数</h2>
                <textarea id="group-sizes" class="py-input" type="text" rows="10" cols="20"></textarea>
            </div>
        </div>
        <br>
        
        <!-- ツール実行 -->
        <button class="py-button" type="submit" py-click="main()" >次のグループ分け</button>

        <!-- 結果 -->
        <h2>結果</h2>
        <b><div id="result"></div></b>
        
        <!-- <div class="flex"> -->
        <!-- オプション -->
        <div>
            <h2>オプション</h2>
            <div class="flex">
                <input id="add-member" class="py-input" type="text"/>
                <button class="py-button" type="submit" py-click="add_member()">メンバー追加</button>
            </div>
            <br>
            <div class="flex">
                <input id="remove-member" class="py-input" type="text"/>
                <button class="py-button" type="submit" py-click="remove_member()">メンバー削除</button>
            </div>
            <br>
            <div id="add-remove"></div>
        </div>

        <!-- 統計 -->
        <div>
            <h2>統計</h2>
            ※後から追加されたメンバーの統計はダミーです。<br>
            <span id="stats"></span>
        </div>
        <!-- </div> -->

        <!-- 履歴 -->
        <div>
            <h2>履歴</h2>
            <div id="log"></div>
        </div>
    
        <!-- ツールステータス（ユーザには見えない） -->
        <div hidden>
            <h2>ステータス</h2>
            <textarea id="status" class="py-input" type="text" rows="10" cols="50"></textarea>
        </div>

        <!-- Initializer -->
        <py-script>
            initialize_member_info()
            initialize_group_info()
            initialize_status()
            dump_pair_matrix()
        </py-script>


        <small>&copy; <a href="https://twitter.com/tsukasa__diary" target="_blank" rel="noopener noreferrer">tsukasa_diary</a> 2023</small>
    </body>
</html>
