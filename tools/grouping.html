<!DOCTYPE html>
<html lang='ja'>
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" href="./css/common.css">
        <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css"/>
        <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    </head>

    <body>
        <!-- PyScript -->
        <py-config>
            packages = ["numpy", "matplotlib", "seaborn"]
        </py-config>

        <script type="py" src="./pyscripts/grouping.py"></script>

        <!-- Body -->
        <h1>グループ分けツール</h1>
        メンバー名、グループ名、グループ人数の各フォームを埋めて【次のグループ分け】をクリックすると初期のグループ分けが生成されます。<br>
        その後は【次のグループ分け】をクリックし続けるだけで新しいグループ分けが生成されていきます。<br>

        <h2>特色</h2>
        <ul>
            <li>なるべく回数の多いペアを避け、回数の少ないペアを優先します。</li>
            <li>休憩回数（余りになった回数）が均等になるようにします。</li>
            <li>統計情報としてこれまでの休憩回数とペアの回数が可視化されます。（ぶっちゃけデバッグ用）</li>
        </ul>

        <h2>注意事項</h2>
        <ul>
            <li>メンバー名およびグループ名に空白、","、";"が含まれてはいけません。</li>
            <li>ステータス欄は内部プログラムのためのログ置き場です。改変してしまうとうまく動作しない場合があります。</li>
        </ul>

        <!-- 情報入力 -->
        <div class="flex">
            <div>
                <h2>メンバー名</h2>
                <textarea id="member-names" class="py-input" type="text" rows="10" cols="20"></textarea>
            </div>
            <div>
                <h2>グループ名</h2>
                <textarea id="group-names" class="py-input" type="text" rows="10" cols="20"></textarea>
            </div>
            <div>
                <h2>グループ人数</h2>
                <textarea id="group-sizes" class="py-input" type="text" rows="10" cols="20"></textarea>
            </div>
        </div>
        <br>
        
        <!-- ツール実行 -->
        <button class="py-button" type="submit" py-click="main()" >次のグループ分け</button>

        <!-- 結果 -->
        <h2>結果</h2>
        <div id="result"></div>

        <!-- オプション -->
        <h2>オプション</h2>
        <div class="flex">
            <input id="add-member" class="py-input" type="text" value="Comming Soon"/>
            <button class="py-button" type="submit" py-click="add_member()">メンバー追加</button>
        </div>
        <br>
        <div class="flex">
            <input id="remove-member" class="py-input" type="text" value="Comming Soon"/>
            <button class="py-button" type="submit" py-click="remove_member()">メンバー削除</button>
        </div>
        
        <div class="flex">
            <!-- 統計 -->
            <div>
                <h2>統計</h2>
                <span id="stats"></span>
            </div>
    
            <!-- ツールステータス -->
            <div>
                <h2>ステータス</h2>
                <textarea id="status" class="py-input" type="text" rows="10" cols="50"></textarea>
            </div>
        </div>

        <!-- Initializer -->
        <py-script>
            initialize_member_info()
            initialize_group_info()
            initialize_status()
            dump_pair_matrix()
        </py-script>


        <small>&copy; <a href="https://twitter.com/tsukasa__diary" target="_blank" rel="noopener noreferrer">tsukasa_diary</a> 2023</small>
    </body>
</html>
